<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
  <meta name="GENERATOR" content="LinuxDoc-Tools 0.9.21">
  <title>Sylpheed-Claws User's Manual: Handling MIME types</title>
  <link href="sylpheed-15.html" rel="next">
  <link href="sylpheed-13.html" rel="previous">
  <link href="sylpheed.html#toc14" rel="contents">
</head>
<body>
<a href="sylpheed-15.html">Next</a>
<a href="sylpheed-13.html">Previous</a>
<a href="sylpheed.html#toc14">Contents</a>
<hr>
<h2><a name="s14">12.</a> <a href="sylpheed.html#toc14">Handling MIME
types</a></h2>
<h2><a name="ss14.1">12.1</a> <a href="sylpheed.html#toc14.1">How
Sylpheed-Claws checks for Mime types</a>
</h2>
<p>When attaching a file to a message (composing a new message), the
MIME type of the attached file is choosen based on the file extension
from the mapping list defined in the <i>mime.types</i> file(s).
Sylpheed-Claws defines its MIME type mapping table by loading the
system wide MIME types file, then the user file.
The systeme file is <span style="font-style: italic;">/usr/share/mime/globs
</span>or, if this doesn't exist, <span style="font-style: italic;">SYSCONFDIR/</span><i>mime.types</i>
(SYSCONFDIR can
be defined at compile time), or if it does not exist, <i>/etc/mime.types</i>.&nbsp;</p>
<p>A <i>mime.types</i> file consist of one MIME type definition per
line,
each definition line starting with the name of the MIME type, followed
by
a space separated list of the corresponding file extensions.
The file can contain empty lines, and comments start with the <code>#</code>
character and close at line's end.</p>
<p>Following is a typical <i>mime.types</i> file (an extract of mine):</p>
<p>
</p>
<pre># This file controls what Internet media types are sent to the client for<br># given file extension(s).  Sending the correct media type to the client<br># is important so they know how to handle the content of the file.<br># The Internet media type registry is at <br># &lt;ftp://ftp.iana.org/in-notes/iana/assignments/media-types/&gt;.<br><br># MIME type                     Extension<br>application/mac-binhex40        hqx<br>application/mac-compactpro      cpt<br>application/msword              doc<br>application/pdf                 pdf<br>application/postscript          ai eps ps<br>application/rtf                 rtf<br>application/x-bcpio             bcpio<br>application/x-bzip2             bz2<br>application/x-csh               csh<br>application/x-gtar              gtar<br>application/x-gzip              gz tgz<br>application/x-kword             kwd kwt<br>application/x-kspread           ksp<br>application/x-kpresenter        kpr kpt<br>application/x-kchart            chrt<br>application/x-latex             latex<br>application/x-sh                sh<br>application/x-shar              shar<br>application/x-shockwave-flash   swf<br>application/x-tar               tar<br>application/x-tcl               tcl<br>application/x-tex               tex<br>application/x-texinfo           texinfo texi<br>application/x-troff             t tr roff<br>application/x-troff-man         man<br>application/zip                 zip<br>audio/mpeg                      mpga mp2 mp3<br>audio/x-aiff                    aif aiff aifc<br>audio/x-wav                     wav<br>image/gif                       gif<br>image/ief                       ief<br>image/jpeg                      jpeg jpg jpe<br>image/png                       png<br>image/tiff                      tiff tif<br>text/plain                      asc txt<br>text/rtf                        rtf<br>text/sgml                       sgml sgm<br>text/xml                        xml<br>video/mpeg                      mpeg mpg mpe<br>video/x-msvideo                 avi<br>text/html                       html htm<br></pre>
<p></p>
<p>If the file can be found or has the wrong format, Sylpheed-Claws will
assume
the default MIME type for all the attachments: <i>application/octet-stream</i>.
In such a case, the recipients mail client may not know what
application to use to view the attachment.</p>
<h2><a name="ss14.2">12.2</a> <a href="sylpheed.html#toc14.2">How
Sylpheed-Claws handles attachments (reception)</a>
</h2>
<p>When opening an attachment (select the attachment, right click and
select
<i>Open</i>) Sylpheed-Claws uses one of the following methods to determine
the application to launch:</p>
<p>
</p>
<ul>
  <li>The attachment is an image: the application is the one defined by
the
    <i>mime_image_viewer</i> variable of the common preferences
configuration
file (<i>$HOME/.sylpheed/sylpheedrc</i>). If no application is defined,
or
if the format of the definition is not valid, the default application
command is <i>display</i> (ImageMagick viewer).</li>
  <li>The attachment is a sound file: the application is the one
defined by the
    <i>mime_audio_player</i> variable of the common preferences
configuration
file (<i>$HOME/.sylpheed/sylpheedrc</i>). If no application is defined,
or
if the format of the definition is not valid, the default application
command is <i>play</i>.</li>
  <li>The attachment is a HTML file: the application is the one defined
by the
    <i>uri_cmd</i> variable of the common preferences configuration
file (<i>$HOME/.sylpheed/sylpheedrc</i>). This can also be changed in
the
    <i>Common preferences</i>, by changing the <i>Web browser</i>
defined
in the <i>Other</i> tab.</li>
  <li>Any other attachment type: Sylpheed-Claws relies on <i>metamail</i> to
use
the correct application (Sylpheed-Claws starts <i>metamail</i> giving it
the attachment file and the MIME type taken from the mail).</li>
</ul>
<p></p>
<p>The binding of the applications to each MIME type is defined in the
<i>mailcap</i> file. The systeme wide file is <i>/etc/mailcap</i>,
while the user file is <i>$HOME/.mailcap</i>.</p>
<p>In the mailcap file, there is one definition per line, big lines
can be broken by escaping the newline with a <i>\</i> character,
the first element of the line is the MIME type, then a semi-colon,
(<i>;</i>), and finally the application to launch.
The application part (right side of the semi-colon) can contain several
shell commands separated by an escaped semi-colon (<i>\;</i>) and
the <i>%s</i> string is replaced by the name of the file when
launching the command.</p>
<p>Following is a typical <i>mailcap</i> file (an extract of mine):</p>
<p>
</p>
<pre>
image/*; ee %s

video/mpeg; gtv %s
video/*; xanim %s

application/pdf; xpdf %s

text/html; dillo %s
</pre>
<p></p>
<hr>
<a href="sylpheed-15.html">Next</a>
<a href="sylpheed-13.html">Previous</a>
<a href="sylpheed.html#toc14">Contents</a>
</body>
</html>
